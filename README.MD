
Building a simple stack and deploying Wordpress, MySQL and Apache using vagrant to provision the VMs & Ansible Playbooks.

Requirements:

  1. Vagrant file to create 2 VMs, ubuntu_wordpress and ubuntu_mysql running ubuntu/trusty 64 bits.
  2. Run vagrant up wordpress mysql to provisoon the VMs.
  3. Requires ansible installation.

        $ sudo apt update
        $ sudo apt install software-properties-common
        $ sudo apt-add-repository --yes --update ppa:ansible/ansible
        $ sudo apt install ansible

These playbooks require Ansible 2.9.6

These playbooks are meant to be a reference and starter's guide to building Ansible Playbooks.

These playbooks were tested on Ubuntu 18.04 so I recommend that you use Ubuntu to test these modules.

This LAMP stack can be on a single node or multiple nodes. The inventory file 'hosts' defines the nodes in which the stacks should be configured.

    [wordpress]
    wp_server_names

    [database]
    db_servernames

The stack can be deployed using the following command:

    ansible-playbook -i hosts provisioning.yml

Once done, you can check the results by browsing to the ip of the wordpress VM.

You should see a simple Wordpress test page.

![wordpress image](data:image/jpeg;base64,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)
